<div class="tabs-container ">
  <ul class="nav nav-pills d-flex justify-content-center align-items-center text-center" id="pills-tab" role="tablist" style="width: 100%;">
    <!-- Login Tab -->
    <li class="nav-item flex-fill" *ngIf="!state.competenze">
      <a class="nav-link active ms-3" id="login-tab" data-bs-toggle="pill" href="#login" role="tab" aria-controls="login" aria-selected="true">Login   </a>
    </li>

    <!-- Register Tab -->
    <li class="nav-item flex-fill " *ngIf="!state.competenze">
      <a class="nav-link" id="register-tab" data-bs-toggle="pill" href="#register" role="tab" aria-controls="register" aria-selected="false">Register</a>
    </li>

    <!-- Nuova Competenza Tab -->
    <li class="nav-item flex-fill" *ngIf="state.competenze">
      <a class="nav-link active" id="competenza-tab" data-bs-toggle="pill" href="#competenza" role="tab" aria-controls="competenza" aria-selected="false">Nuova Competenza</a>
    </li>
  </ul>

  <div class="tab-content" id="pills-tabContent">
    <!-- Login Tab Content -->
    <div class="tab-pane fade show active" id="login" role="tabpanel" aria-labelledby="login-tab" *ngIf="!state.competenze">
      <div class="container mt-4">
        <form [formGroup]="loginForm" (ngSubmit)="onLoginSubmit()">
          <!-- Social login buttons -->
          <div class="text-center mb-3">
            <p>Sign in with:</p>
            <button type="button" class="btn btn-secondary btn-floating mx-1">
              <i class="fab fa-facebook-f"></i>
            </button>
            <button type="button" class="btn btn-secondary btn-floating mx-1">
              <i class="fab fa-google"></i>
            </button>
            <button type="button" class="btn btn-secondary btn-floating mx-1">
              <i class="fab fa-twitter"></i>
            </button>
            <button type="button" class="btn btn-secondary btn-floating mx-1">
              <i class="fab fa-github"></i>
            </button>
          </div>

          <p class="text-center">or:</p>

          <!-- Email input -->
          <div class="mb-3">
            <label for="loginEmail" class="form-label">Email</label>
            <input type="email" id="loginEmail" class="form-control" formControlName="email" />
            <div *ngIf="loginForm.get('email')?.invalid && loginForm.get('email')?.touched" class="text-danger">
              Please enter a valid email address.
            </div>
          </div>

          <!-- Password input -->
          <div class="mb-3">
            <label for="loginPassword" class="form-label">Password</label>
            <input type="password" id="loginPassword" class="form-control" formControlName="password" />
            <div *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched" class="text-danger">
              Password must be at least 6 characters long.
            </div>
          </div>

          <!-- Checkbox and Forgot password link -->
          <div class="row mb-4">
            <div class="col-md-6 d-flex justify-content-center">
              <div class="form-check mb-3 mb-md-0">
                <input class="form-check-input" type="checkbox" id="loginCheck" formControlName="rememberMe" />
                <label class="form-check-label" for="loginCheck">Remember me</label>
              </div>
            </div>
            <div class="col-md-6 d-flex justify-content-center">
              <a href="#!" class="text-decoration-none">Forgot password?</a>
            </div>
          </div>

          <!-- Submit button -->
          <button type="submit" class="btn btn-primary btn-block mb-4">
            Sign in
          </button>

          <!-- Register buttons -->
          <div class="text-center">
            <p>Not a member? <a href="#!" class="text-decoration-none">Register</a></p>
          </div>
        </form>
      </div>
    </div>

    <!-- Register Tab Content -->
    <div class="tab-pane fade" id="register" role="tabpanel" aria-labelledby="register-tab" *ngIf="!state.competenze">
      <div class="container mt-4">
        <form [formGroup]="registerForm" (ngSubmit)="onRegisterSubmit()">
          <!-- Social signup buttons -->
          <div class="text-center mb-3">
            <p>Sign up with:</p>
            <button type="button" class="btn btn-secondary btn-floating mx-1">
              <i class="fab fa-facebook-f"></i>
            </button>
            <button type="button" class="btn btn-secondary btn-floating mx-1">
              <i class="fab fa-google"></i>
            </button>
            <button type="button" class="btn btn-secondary btn-floating mx-1">
              <i class="fab fa-twitter"></i>
            </button>
            <button type="button" class="btn btn-secondary btn-floating mx-1">
              <i class="fab fa-github"></i>
            </button>
          </div>

          <p class="text-center">or:</p>

          <!-- Name input -->
          <div class="mb-3">
            <label for="registerName" class="form-label">Nome</label>
            <input type="text" id="registerName" class="form-control" formControlName="nome" />
            <div *ngIf="registerForm.get('nome')?.invalid && registerForm.get('nome')?.touched" class="text-danger">
              Please enter your name.
            </div>
          </div>

          <!-- Cognome input -->
          <div class="mb-3">
            <label for="registerCognome" class="form-label">Cognome</label>
            <input type="text" id="registerCognome" class="form-control" formControlName="cognome" />
            <div *ngIf="registerForm.get('cognome')?.invalid && registerForm.get('cognome')?.touched" class="text-danger">
              Please enter your cognome.
            </div>
          </div>

          <!-- Email input -->
          <div class="mb-3">
            <label for="registerEmail" class="form-label">Email</label>
            <input type="email" id="registerEmail" class="form-control" formControlName="email" />
            <div *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched" class="text-danger">
              Please enter a valid email address.
            </div>
          </div>

          <!-- Password input -->
          <div class="mb-3">
            <label for="registerPassword" class="form-label">Password</label>
            <input type="password" id="registerPassword" class="form-control" formControlName="password" />
            <div *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched" class="text-danger">
              Password must be at least 6 characters long.
            </div>
          </div>

          <!-- Repeat Password input -->
          <div class="mb-3">
            <label for="registerRepeatPassword" class="form-label">Repeat password</label>
            <input type="password" id="registerRepeatPassword" class="form-control" formControlName="repeatPassword" />
            <div *ngIf="registerForm.get('repeatPassword')?.invalid && registerForm.get('repeatPassword')?.touched" class="text-danger">
              Passwords must match.
            </div>
          </div>

          <!-- Data di Nascita input -->
          <div class="mb-3">
            <label for="registerDataDiNascita" class="form-label">Data di Nascita</label>
            <input type="date" id="registerDataDiNascita" class="form-control" formControlName="dataDiNascita" />
            <div *ngIf="registerForm.get('dataDiNascita')?.invalid && registerForm.get('dataDiNascita')?.touched" class="text-danger">
              Il campo Data di Nascita è richiesto.
            </div>
          </div>
          <!-- Comune di Nascita input -->
          <div class="mb-3">
            <label for="registerComuneDiNascita" class="form-label">Comune di Nascita</label>
            <input type="text" id="registerComuneDiNascita" class="form-control" formControlName="comuneDiNascita" />
            <div *ngIf="registerForm.get('comuneDiNascita')?.invalid && registerForm.get('comuneDiNascita')?.touched" class="text-danger">
              Il campo Comune di Nascita è richiesto.
            </div>
          </div>

          <!-- Codice Fiscale input -->
          <div class="mb-3">
            <label for="registerCodiceFiscale" class="form-label">Codice Fiscale</label>
            <input type="text" id="registerCodiceFiscale" class="form-control" formControlName="codiceFiscale" />
            <div *ngIf="registerForm.get('codiceFiscale')?.invalid && registerForm.get('codiceFiscale')?.touched" class="text-danger">
              Il campo Codice Fiscale è richiesto.
            </div>
          </div>

          <!-- Telefono input -->
          <div class="mb-3">
            <label for="registerTelefono" class="form-label">Telefono</label>
            <input type="text" id="registerTelefono" class="form-control" formControlName="telefono" />
            <div *ngIf="registerForm.get('telefono')?.invalid && registerForm.get('telefono')?.touched" class="text-danger">
              Il campo Telefono è richiesto.
            </div>
          </div>

          <!-- Indirizzo input -->
          <div class="mb-3">
            <label for="registerIndirizzo" class="form-label">Indirizzo</label>
            <input type="text" id="registerIndirizzo" class="form-control" formControlName="indirizzo" />
            <div *ngIf="registerForm.get('indirizzo')?.invalid && registerForm.get('indirizzo')?.touched" class="text-danger">
              Il campo Indirizzo è richiesto.
            </div>
          </div>

          <!-- CAP input -->
          <div class="mb-3">
            <label for="registerCAP" class="form-label">CAP</label>
            <input type="text" id="registerCAP" class="form-control" formControlName="cap" />
            <div *ngIf="registerForm.get('cap')?.invalid && registerForm.get('cap')?.touched" class="text-danger">
              Il campo CAP è richiesto.
            </div>
          </div>

          <!-- Provincia input -->
          <div class="mb-3">
            <label for="registerProvincia" class="form-label">Provincia</label>
            <input type="text" id="registerProvincia" class="form-control" formControlName="provincia" />
            <div *ngIf="registerForm.get('provincia')?.invalid && registerForm.get('provincia')?.touched" class="text-danger">
              Il campo Provincia è richiesto.
            </div>
          </div>

         

          <!-- Radio buttons for sesso selection -->
          <div class="form-check form-check-inline mb-3">
            <input class="form-check-input" type="radio" id="male" name="sesso" formControlName="sesso" value="M" />
            <label class="form-check-label" for="male">M</label>
          </div>
          
          <div class="form-check form-check-inline mb-3">
            <input class="form-check-input" type="radio" id="female" name="sesso" formControlName="sesso" value="F" />
            <label class="form-check-label" for="female">F</label>
          </div>
        <!-- Checkbox -->
        <div class="form-check mb-3">
          <input class="form-check-input" type="checkbox" id="registerCheck" formControlName="terms" />
          <label class="form-check-label" for="registerCheck">I have read and agree to the terms</label>
          <div *ngIf="registerForm.get('terms')?.invalid && registerForm.get('terms')?.touched" class="text-danger">
            Please accept the terms.
          </div>
        </div>
          <!-- Submit button -->
          <button type="submit" class="btn btn-primary btn-block mb-3">
            Sign up
          </button>
        </form>
      </div>
    </div>

    <!-- Nuova Competenza Tab Content -->
    <div class="tab-pane fade show active" id="competenza" role="tabpanel" aria-labelledby="competenza-tab" *ngIf="state.competenze">
      <div class="container mt-4">
        <app-competenze></app-competenze>
      </div>
    </div>
  </div>
</div>

<!-- Popup quando competenze è false -->
<div *ngIf="state.popupVisible" class="popup-container">
  <div class="popup">
    <h2>Popup Content</h2>
    <p>{{ errorMessage }}</p>
    <button type="button" class="btn btn-primary" (click)="closePopup()" *ngIf="colesePP">Close</button>
    <button type="button" class="btn btn-primary" (click)="checkEmailConfirmedState()" *ngIf="validazione" [disabled]="state.competenze">Check Email Confirmation</button>
  </div>
</div>